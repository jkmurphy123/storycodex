# run
cd projects
source llm_env/bin/activate
cd storycodex

# run pytest scripts

python -m pytest -rs


#test llm

storycodex init --root demo_story
storycodex seed apply --root demo_story

export STORYCODEX_BASE_URL="http://localhost:11434/v1"
export STORYCODEX_MODEL="gemma3:4b"
# Only needed if your httpx client insists on an API key header:
export OPENAI_API_KEY="ollama"

export STORYCODEX_DEBUG_LLM=1       #if want to see llm results

storycodex plan spine --root demo_story --force
cat demo_story/artifacts/plot/spine.json

# story testing

rm -rf demo_story
storycodex init --root demo_story
storycodex seed apply --root demo_story

export STORYCODEX_BASE_URL="http://localhost:11434"
export STORYCODEX_MODEL="gemma3:4b"
export STORYCODEX_BACKEND="ollama"
export STORYCODEX_TIMEOUT_SECONDS=240

storycodex plan spine --root demo_story --force


